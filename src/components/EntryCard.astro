---
export interface Props {
  title: string;
  excerpt?: string;
  category: string;
  tags?: string[];
  dateAdded: Date;
  status: string;
  slug: string;
}

const {
  title,
  excerpt,
  category,
  tags = [],
  dateAdded,
  status,
  slug,
} = Astro.props;

const getCategoryColor = (cat: string) => {
  const colors = {
    shit: "#dc2626",
    stars: "#059669",
  };
  return colors[cat as keyof typeof colors] || "#6b7280";
};
---

<article class="entry-card" data-status={status}>
  <header class="entry-header">
    <h2>
      <a href={`/${category}/${slug}`}>{title}</a>
    </h2>
    <div class="entry-meta">
      <span
        class="category"
        style={`--category-color: ${getCategoryColor(category)}`}
      >
        {category}
      </span>
      <time datetime={dateAdded.toISOString()}>
        {dateAdded.toLocaleDateString()}
      </time>
      {
        status !== "active" && (
          <span class="status status-{status}">{status}</span>
        )
      }
    </div>
    {
      tags && tags.length > 0 && (
        <div class="tags">
          {tags.map((tag) => (
            <a href={`/search/?tag=${encodeURIComponent(tag)}`} class="tag">
              #{tag}
            </a>
          ))}
        </div>
      )
    }
  </header>

  {excerpt && <p class="entry-excerpt">{excerpt}</p>}
</article>

<style>
  .entry-card {
    background: white;
    border: 1px solid #e5e5e5;
    border-radius: 10px;
    padding: 1.5rem;
    margin-bottom: 1.25rem;
    transition: all 0.2s ease;
  }

  .entry-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    transform: translateY(-1px);
    border-color: #d1d5db;
  }

  .entry-header h2 {
    margin: 0 0 0.75rem 0;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  .entry-header h2 a {
    color: #1a1a1a;
    text-decoration: none;
    font-size: 1.3rem;
    font-weight: 600;
    line-height: 1.3;
  }

  .entry-header h2 a:hover {
    color: #007acc;
  }

  .entry-meta {
    margin-bottom: 0.875rem;
  }

  .entry-excerpt {
    line-height: 1.6;
    color: #555;
    margin: 0;
    font-size: 0.95rem;
  }

  .tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin: 0.875rem 0 0 0;
    padding: 0;
    list-style: none;
  }

  .tag {
    font-size: 0.8rem;
  }

  @media (max-width: 768px) {
    .entry-card {
      padding: 1.25rem;
    }

    .entry-header h2 a {
      font-size: 1.15rem;
    }

    .entry-meta {
      gap: 0.5rem;
    }
  }
</style>
